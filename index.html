<!DOCTYPE html>
<html lang="so">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Osmaniya Keyboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Osmaniya&display=swap');
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .corner {
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      height: 60px;
    }
    .corner::before,
    .corner::after {
      content: '';
      position: absolute;
      background: #f28c28;
    }
    .corner::before {
      width: 30px;
      height: 5px;
      top: 0;
      left: 0;
    }
    .corner::after {
      width: 5px;
      height: 30px;
      top: 0;
      left: 0;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5em;
      color: #f28c28;
      text-transform: uppercase;
    }
    p {
      color: #ccc;
      font-size: 1rem;
      max-width: 600px;
      margin: 10px auto 20px;
    }
    input, textarea {
      width: 90%;
      max-width: 600px;
      padding: 14px;
      margin: 15px auto;
      background: #111;
      border: 1px solid #444;
      border-radius: 8px;
      color: #fff;
      font-size: 1.2rem;
      display: block;
    }
    #output {
      font-family: 'Noto Sans Osmaniya', 'Segoe UI', sans-serif;
      font-size: 2rem;
      background: #1a1a1a;
      color: #fefefe;
      resize: vertical;
      min-height: 100px;
    }
    button {
      background: #f28c28;
      color: #000;
      border: none;
      border-radius: 6px;
      padding: 12px 24px;
      font-size: 1rem;
      cursor: pointer;
      margin: 10px;
      transition: background 0.3s;
    }
    button:hover {
      background: #ffa94d;
    }
    .container {
      padding: 20px;
      position: relative;
      z-index: 1;
    }
    .button-group {
      display: flex;
      justify-content: center;
    }
    .instructions {
      max-width: 800px;
      text-align: left;
      margin: 30px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }
    .instructions h2 {
      color: #f28c28;
      margin-top: 0;
    }
    .instructions p {
      margin-bottom: 15px;
    }
    .bilingual {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .bilingual p {
      flex: 1 1 45%;
      min-width: 300px;
    }
  </style>
</head>
<body>
  <div class="corner"></div>
  <div class="container">
    <h1>Soo Dhawoow</h1>
    <p>Farta Osman Yusuf Kenadid – Qalabka Qorista Osmaniya (Osman Yusuf Kenadid Script – Osmaniya Writing Tool)</p>
    <input type="text" id="input" placeholder="type..." oninput="convert()" autocomplete="off" autocapitalize="off">
    <textarea id="output" placeholder="𐒓𐒖𐒐𐒖𐒖𐒑" readonly></textarea>
    <div class="button-group">
      <button onclick="copyText()">Copy Osmaniya</button>
      <button onclick="clearFields()">Clear</button>
    </div>
    
<div class="instructions">
      <h2>The Osmanya Script: A Professional Guide</h2>
      <div class="bilingual">
        <p>The Osmanya script represents a sophisticated writing system specifically engineered for the Somali language. This meticulously designed alphabet provides precise phonetic mapping to Somali phonology, enabling efficient written communication.</p>
        <p>Farta Osmanya waa nidaam qoraal oo si xirfad leh loogu horumariyey af-Soomaaliga. Nidaamkan qoraalka ah waxa uu si sax ah u muujiyaa dhawaaqyada af-Soomaaliga, taasoo fududeynaysa wada xiriirka qoraalka.</p>
      </div>
      
      <h2>Usage Instructions</h2>
      <div class="bilingual">
        <p>1. Enter your Somali text in the designated input field marked "Tuuri erayga..."</p>
        <p>1. Ku qor qoraalkaaga Soomaaliga ah goobta gelitaanka ee calaamadsan "Tuuri erayga..."</p>
        
        <p>2. The system will instantly render your input in the Osmanya script within the output field below.</p>
        <p>2. Nidaamku wuxuu si toos ah ugu beddelayaa qoraalkaaga farta Osmanya ee goobta hoose.</p>
        
        <p>3. Select "Copy Osmanya" to transfer the converted text to your clipboard.</p>
        <p>3. Dooro "Copy Osmanya" si aad u wareegjiso qoraalka la beddelay.</p>
        
        <p>4. Utilize the "Clear" function to reset both input and output fields.</p>
        <p>4. Isticmaal shaqada "Clear" si aad dib u bilowdo labada goobood.</p>
      </div>
      
      <h2>Example:</h2>
      <div class="bilingual">
        <p>Typing "soo dhawow" (which means "welcome") will display the phrase in Osmanya letters.</p>
        <p>Markaad qorto "soo dhawow" (oo macnaheedu yahay "soo dhawoow") waxaa laguu soo bandhigi doonaa qoraalkaas oo ku qoran farta Osmanya.</p>
      </div>
    </div>
  </div>

 <script>
    // Mapping table for Somali Latin to Osmaniya script conversion
    // Digraphs must be processed before single letters
    const mapping = {
      // Digraphs first to ensure proper replacement
      'sh': '𐒑', 'kh': '𐒅', 'dh': '𐒤', 'th': '𐒥', 'aa': '𐒧', 'oo': '𐒨',
      // Single letters
      'a': '𐒖', 'b': '𐒍', 't': '𐒎', 'j': '𐒏', 'x': '𐒄', 
      'd': '𐒔', 'r': '𐒒', 's': '𐒈', 'g': '𐒐', 'f': '𐒓', 
      'q': '𐒕', 'c': '𐒋', 'h': '𐒗', 'y': '𐒘', 'm': '𐒙', 
      'n': '𐒚', 'w': '𐒛', 'l': '𐒜', 'k': '𐒝', 'e': '𐒞', 
      'i': '𐒟', 'u': '𐒠', 'o': '𐒡', 'v': '𐒢', 'z': '𐒣', 
      "'": '𐒦'
    };

    function convert() {
      const input = document.getElementById('input').value.toLowerCase();
      let output = '';
      let i = 0;

      while (i < input.length) {
        // Process in order of mapping definition, which has digraphs first
        let matched = false;
        
        // Try each mapping key in the order they are defined
        for (const key in mapping) {
          if (input.substring(i, i + key.length) === key) {
            output += mapping[key];
            i += key.length;
            matched = true;
            break;
          }
        }
        
        // If no match found, keep the character as is
        if (!matched) {
          output += input[i];
          i += 1;
        }
      }

      document.getElementById('output').value = output;
    }

    function copyText() {
      const textarea = document.getElementById('output');
      if (textarea.value.trim() === '') {
        alert('Nothing to copy. Please type some text first.');
        return;
      }
      
      // Fallback for browsers that don't support clipboard API
      try {
        // Try to use the clipboard API
        navigator.clipboard.writeText(textarea.value)
          .then(() => showCopyMessage())
          .catch(err => fallbackCopy(textarea));
      } catch (err) {
        // If clipboard API is not available, use fallback
        fallbackCopy(textarea);
      }
    }
    
    function showCopyMessage() {
      // Create a temporary element for the success message
      const msg = document.createElement('div');
      msg.textContent = 'Copied!';
      msg.style.position = 'fixed';
      msg.style.top = '20px';
      msg.style.left = '50%';
      msg.style.transform = 'translateX(-50%)';
      msg.style.padding = '10px 20px';
      msg.style.background = '#f28c28';
      msg.style.color = '#000';
      msg.style.borderRadius = '4px';
      msg.style.zIndex = '1000';
      document.body.appendChild(msg);
      
      // Remove the message after 2 seconds
      setTimeout(() => {
        document.body.removeChild(msg);
      }, 2000);
    }
    
    function fallbackCopy(textarea) {
      // Fallback method using selection and execCommand
      textarea.select();
      try {
        const successful = document.execCommand('copy');
        if (successful) {
          showCopyMessage();
        } else {
          alert('Failed to copy. Please try again.');
        }
      } catch (err) {
        alert('Failed to copy. Please try again.');
      }
      // Deselect the text
      window.getSelection().removeAllRanges();
    }

    function clearFields() {
      document.getElementById('input').value = '';
      document.getElementById('output').value = '';
      document.getElementById('input').focus();
    }
    
    // Initialize with focus on input field
    window.onload = function() {
      document.getElementById('input').focus();
    };
  </script>
</body>
</html>
